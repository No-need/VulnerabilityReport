using VulnerabilityReport.Models.DataBase;

namespace VulnerabilityReport.Services
{
    public class ReportService
    {
        private VulnerabilityReportContext _db;

        public ReportService(VulnerabilityReportContext db)
        {
            _db = db;
        }


        public List<Project> GetProjects()
        {
            return _db.Projects.ToList();
        }

        public bool ProjectExist(string id)
        {
            return _db.Projects.Any(x=>x.ID== id);
        }

        public void InsertProject(string id,string name,string desc)
        {
            Project project = new Project { 
                ID = id,
                Name = name,
                Description = desc
            };
            _db.Projects.Add(project);
            _db.SaveChanges();
        }

        public void UpdateProject(string id,string name,string desc)
        {
            var project = _db.Projects.First(x => x.ID == id);
            project.Name = name;
            project.Description = desc;
            _db.Projects.Update(project);
            _db.SaveChanges();
        }

        public void DeleteProject(string id) { 
            var project = _db.Projects.First(x => x.ID == id);
            _db.Projects.Remove(project);
            _db.SaveChanges();
        }
    }
}
